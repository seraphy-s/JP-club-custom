(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"8bIy":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageQuery=n,t.setAuthority=u;var r=a("os2Q");function n(){return(0,r.parse)(window.location.href.split("?")[1])}function u(e,t,a){var r="string"===typeof t?[t]:t;return localStorage.setItem("id",e),localStorage.setItem("token",a),localStorage.setItem("antd-pro-authority",JSON.stringify(r))}},AqAQ:function(e,t,a){"use strict";var r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.accountLogin=c,t.getFakeCaptcha=i;var n=r(a("Ico4")),u=r(a("UWy3")),o=r(a("t3Un"));function c(e){return s.apply(this,arguments)}function s(){return s=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.default)("/api/user/login",{method:"POST",data:t}));case 1:case"end":return e.stop()}},e)})),s.apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return l=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.default)("/api/login/captcha?mobile=".concat(t)));case 1:case"end":return e.stop()}},e)})),l.apply(this,arguments)}},ebWa:function(e,t,a){"use strict";var r=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("mK77")),u=r(a("Ico4"));a("gN+B");var o=r(a("fw9S")),c=a("DWJA"),s=a("AqAQ"),i=a("8bIy"),l=a("HZnN"),d={namespace:"userLogin",state:{status:void 0},effects:{login:u.default.mark(function e(t,a){var r,n,l,d,p,f,g,h;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,e.next=4,localStorage.clear();case 4:return e.next=6,n(s.accountLogin,r);case 6:return d=e.sent,e.next=9,l({type:"changeLoginStatus",payload:d});case 9:if("ok"!==d.status){e.next=28;break}if(p=new URL(window.location.href),f=(0,i.getPageQuery)(),g=f.redirect,!g){e.next=22;break}if(h=new URL(g),h.origin!==p.origin){e.next=20;break}g=g.substr(p.origin.length),g.match(/^\/.*#/)&&(g=g.substr(g.indexOf("#")+1)),e.next=22;break;case 20:return window.location.href=g,e.abrupt("return");case 22:return console.log("redirect",g,localStorage.getItem("id")),o.default.success(d.message),e.next=26,l(c.routerRedux.replace(g||"/account/settings"));case 26:e.next=29;break;case 28:o.default.warning(d.message);case 29:case"end":return e.stop()}},e)}),getCaptcha:u.default.mark(function e(t,a){var r,n;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,e.next=4,n(s.getFakeCaptcha,r);case 4:case"end":return e.stop()}},e)})},reducers:{changeLoginStatus:function(e,t){var a=t.payload;return(0,i.setAuthority)(a.id,a.currentAuthority,a.token),(0,l.reloadAuthorized)(),(0,n.default)({},e,{status:a.status,type:a.type})}}},p=d;t.default=p}}]);